@model List<SongIndexViewModel>

<div class="container py-5">
    <div class="text-center text-light">
        <h1 class="display-4 fw-bold mb-3">
            Your <span class="text-warning"> Songs</span>
        </h1>
    </div>
</div>

<div class="col-12 col-md-6 col-lg-4 mb-4">
    <label class="form-label fw-semibold fs-5 mb-1">Search:</label>
    <form asp-controller="Song" asp-action="SongsIndexForCurrentLoggedArtist" method="get">
        <div class="d-flex align-items-center gap-4 mb-4">
            <input class="form-control form-control-lg"
                   type="search"
                   placeholder="Search..."
                   name="searchItem"
                   value="@Context.Request.Query["searchItem"]" />
            <button type="submit" fix class="btn btn-warning btn-lg fw-semibold">Search</button>
        </div>
        <div class="d-flex align-items-center gap-4">
            <div>
                <input class="form-check-input" type="checkbox" name="filters" value="Title"
                @(Context.Request.Query["filters"].Contains("Title") ? "checked" : "") />
                <label class="form-check-label fw-semibold">By Title</label>
            </div>
            <div>
                <input class="form-check-input" type="checkbox" name="filters" value="Album"
                @(Context.Request.Query["filters"].Contains("Album") ? "checked" : "") />
                <label class="form-check-label fw-semibold">By Album</label>
            </div>
            <div>
                <input class="form-check-input" type="checkbox" name="filters" value="Genre"
                @(Context.Request.Query["filters"].Contains("Genre") ? "checked" : "") />
                <label class="form-check-label fw-semibold">By Genre</label>
            </div>
        </div>
    </form>
</div>

@if (!Model.Any())
{
    <div class="alert alert-danger rounded-4 text-center fw-semibold shadow-sm fs-3">
        <i class="bi bi-search me-2"></i>
        @ViewData["NoResult"]
    </div>
}
else
{
    <div class="row g-4 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4">
        @foreach (var song in Model)
        {
            <div class="col">
                <div class="card h-100 shadow-sm">
                    <img src="@song.ImageURL" class="card-img-top" alt="@song.Title" style="height:180px; object-fit:cover;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">@song.Title</h5>
                        <p class="card-text mb-1"><strong>Genre:</strong> @song.GenreName</p>
                        @if (!string.IsNullOrEmpty(song.AlbumName))
                        {
                            <p class="card-text mb-1"><strong>Album:</strong> @song.AlbumName</p>
                        }
                        <p class="card-text mb-1">
                            <strong>Artists:</strong>
                            @foreach (var artist in song.Artists)
                            {
                                <span class="badge bg-secondary me-1">@artist</span>
                            }
                        </p>
                        <p class="card-text mb-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="30" height="30" class="me-2"><!--!Font Awesome Free v7.1.0 by @@fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M128 96C128 78.3 142.3 64 160 64L480 64C497.7 64 512 78.3 512 96C512 113.7 497.7 128 480 128L480 139C480 181.4 463.1 222.1 433.1 252.1L365.2 320L433.1 387.9C463.1 417.9 480 458.6 480 501L480 512C497.7 512 512 526.3 512 544C512 561.7 497.7 576 480 576L160 576C142.3 576 128 561.7 128 544C128 526.3 142.3 512 160 512L160 501C160 458.6 176.9 417.9 206.9 387.9L274.8 320L206.9 252.1C176.9 222.1 160 181.4 160 139L160 128C142.3 128 128 113.7 128 96zM224 128L224 139C224 164.5 234.1 188.9 252.1 206.9L320 274.8L387.9 206.9C405.9 188.9 416 164.5 416 139L416 128L224 128zM224 512L416 512L416 501C416 475.5 405.9 451.1 387.9 433.1L320 365.2L252.1 433.1C234.1 451.1 224 475.5 224 501L224 512z" /></svg><strong>Length:</strong> @song.Minutes:@song.Seconds minutes</p>
                        <p class="card-text mb-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="30" height="30" class="me-2"><!--!Font Awesome Free v7.1.0 by @@fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M442.9 144C415.6 144 389.9 157.1 373.9 179.2L339.5 226.8C335 233 327.8 236.7 320.1 236.7C312.4 236.7 305.2 233 300.7 226.8L266.3 179.2C250.3 157.1 224.6 144 197.3 144C150.3 144 112.2 182.1 112.2 229.1C112.2 279 144.2 327.5 180.3 371.4C221.4 421.4 271.7 465.4 306.2 491.7C309.4 494.1 314.1 495.9 320.2 495.9C326.3 495.9 331 494.1 334.2 491.7C368.7 465.4 419 421.3 460.1 371.4C496.3 327.5 528.2 279 528.2 229.1C528.2 182.1 490.1 144 443.1 144zM335 151.1C360 116.5 400.2 96 442.9 96C516.4 96 576 155.6 576 229.1C576 297.7 533.1 358 496.9 401.9C452.8 455.5 399.6 502 363.1 529.8C350.8 539.2 335.6 543.9 320 543.9C304.4 543.9 289.2 539.2 276.9 529.8C240.4 502 187.2 455.5 143.1 402C106.9 358.1 64 297.7 64 229.1C64 155.6 123.6 96 197.1 96C239.8 96 280 116.5 305 151.1L320 171.8L335 151.1z" /></svg><strong>Likes:</strong> @song.Likes</p>
                        <p class="card-text mb-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="30" height="30" class="me-2"><!--!Font Awesome Free v7.1.0 by @@fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M216 64C229.3 64 240 74.7 240 88L240 128L400 128L400 88C400 74.7 410.7 64 424 64C437.3 64 448 74.7 448 88L448 128L480 128C515.3 128 544 156.7 544 192L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 192C96 156.7 124.7 128 160 128L192 128L192 88C192 74.7 202.7 64 216 64zM216 176L160 176C151.2 176 144 183.2 144 192L144 240L496 240L496 192C496 183.2 488.8 176 480 176L216 176zM144 288L144 480C144 488.8 151.2 496 160 496L480 496C488.8 496 496 488.8 496 480L496 288L144 288z" /></svg><strong>Release Date:</strong> @song.ReleaseDate</p>
                        @if (User.IsInRole("Artist"))
                        {
                            <div class="d-flex gap-2">
                                <a asp-action="Edit" asp-route-id="@song.Id" class="btn btn-warning btn-md d-inline-flex align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" class="me-2">
                                        <path d="M535.6 85.7C513.7 63.8 478.3 63.8 456.4 85.7L432 110.1L529.9 208L554.3 183.6C576.2 161.7 576.2 126.3 554.3 104.4L535.6 85.7zM236.4 305.7C230.3 311.8 225.6 319.3 222.9 327.6L193.3 416.4C190.4 425 192.7 434.5 199.1 441C205.5 447.5 215 449.7 223.7 446.8L312.5 417.2C320.7 414.5 328.2 409.8 334.4 403.7L496 241.9L398.1 144L236.4 305.7zM160 128C107 128 64 171 64 224L64 480C64 533 107 576 160 576L416 576C469 576 512 533 512 480L512 384C512 366.3 497.7 352 480 352C462.3 352 448 366.3 448 384L448 480C448 497.7 433.7 512 416 512L160 512C142.3 512 128 497.7 128 480L128 224C128 206.3 142.3 192 160 192L256 192C273.7 192 288 177.7 288 160C288 142.3 273.7 128 256 128L160 128z" />
                                    </svg>
                                    Edit
                                </a>

                                <form asp-action="Delete" method="post" asp-route-id="@song.Id">
                                    <button class="btn btn-danger btn-md d-inline-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" class="me-2">
                                            <path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z" />
                                        </svg>
                                        Delete
                                    </button>
                                </form>
                            </div>

                        }
                    </div>
                </div>
            </div>
        }
    </div>
}